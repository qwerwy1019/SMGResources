<?xml version="1.0"?>
<ActionChart>
	<Variables>
		<Variable Name="PathKey" Value="-1"/>
	</Variables>
	<ActionStates>
		<IDLE Animation="IDLE" BlendTick="100">
			<Branch State="WALK" Condition="End Random_30"/>
			<Branch State="IDLE" Condition="End"/>
			<Branch State="ALERT" Condition="CheckPlayerDistance_0_100 CheckPlayerAltitude_-30_30"/>
			<FrameEvent Tick="0" Type="Speed" TargetSpeed="0" Acceleration="100" MoveType="CharacterDirection" Condition=""/>
			<FrameEvent Tick="0" Type="Rotate" Speed="0.0015" Offset="0.5" RotateType="Fixed" Condition="Random_30"/>
			<FrameEvent Tick="0" Type="Rotate" Speed="0.0015" Offset="-0.5" RotateType="Fixed" Condition="Random_30"/>
			<FrameEvent Tick="0" Type="FallSpeed" TargetFallSpeed="20" Acceleration="1.5" Condition=""/>
		</IDLE>
		<WALK Animation="WALK" BlendTick="50">
			<Branch State="WALK" Condition="End Random_80"/>
			<Branch State="IDLE" Condition="End"/>
			<Branch State="ALERT" Condition="CheckPlayerDistance_0_100 CheckPlayerAltitude_-30_30"/>
			<FrameEvent Tick="0" Type="Speed" TargetSpeed="1" Acceleration="2" MoveType="CharacterDirection" Condition=""/>
		</WALK>
		<ALERT Animation="ALERT" BlendTick="100">
			<Branch State="IDLE" Condition="End !CheckPlayerDistance_0_100"/>
			<Branch State="IDLE" Condition="End !CheckPlayerAltitude_-30_30"/>
			<Branch State="RUN" Condition="End"/>
			<FrameEvent Tick="0" Type="Speed" TargetSpeed="0" Acceleration="100" MoveType="CharacterDirection" Condition=""/>
			<FrameEvent Tick="0" Type="Rotate" Speed="0.005" Offset="0" RotateType="ToPlayer" Condition=""/>
		</ALERT>
		<RUN Animation="RUN" BlendTick="100">
			<Branch State="IDLE" Condition="!CheckPlayerDistance_0_100"/>
			<Branch State="IDLE" Condition="!CheckPlayerAltitude_-30_30"/>
			<Branch State="RUN" Condition="End"/>
			<FrameEvent Tick="0" Type="Speed" TargetSpeed="1.8" Acceleration="2" MoveType="CharacterDirection" Condition=""/>
			<FrameEvent Tick="0" Type="Rotate" Speed="0.005" Offset="0" RotateType="ToPlayer" Condition=""/>
		</RUN>
		<ATTACK_READY Animation="IDLE" BlendTick="100">
			<Branch State="IDLE" Condition="!CheckPlayerDistance_0_100"/>
			<Branch State="IDLE" Condition="!CheckPlayerAltitude_-30_30"/>
			<Branch State="RUN" Condition="End"/>
			<FrameEvent Tick="0" Type="Rotate" Speed="1" Offset="0" RotateType="Fixed" Condition=""/>
			<FrameEvent Tick="0" Type="Speed" TargetSpeed="0" Acceleration="4" MoveType="CharacterDirection" Condition=""/>
		</ATTACK_READY>
		<FLY_READY Animation="IDLE" BlendTick="200">
			<Branch State="FLY_PATH" Condition="TargetPositionArrive Variable_PathKey_21"/>
			<Branch State="FLY_END" Condition="End"/>
			<FrameEvent Tick="0" Type="Gravity" On="false" Condition=""/>
			<FrameEvent Tick="0" Type="Collision" On="false" Condition=""/>
			<FrameEvent Tick="0" Type="TargetPosition" TargetPositionType="PathStart" Key="21" Condition="Variable_PathKey_21"/>
			<FrameEvent Tick="0" Type="Speed" TargetSpeed="20" Acceleration="10" MoveType="ToPoint" Condition=""/>
			<FrameEvent Tick="0" Type="Rotate" Speed="1" Offset="0" RotateType="Fixed" Condition=""/>
		</FLY_READY>
		<FLY_PATH Animation="IDLE" BlendTick="200">
			<Branch State="FLY" Condition="End"/>
			<Branch State="FLY_END" Condition="PathEnd"/>
			
			<FrameEvent Tick="0" Type="SetPath" PathKey="21" Condition="Variable_PathKey_21"/>
			
			<FrameEvent Tick="0" Type="Speed" TargetSpeed="0" Acceleration="2" MoveType="Path" Condition=""/>
			<FrameEvent Tick="0" Type="Rotate" Speed="1" Offset="0" RotateType="Path" Condition=""/>
		</FLY_PATH>
		<FLY Animation="IDLE" BlendTick="200">
			<Branch State="FLY" Condition="End"/>
			<Branch State="FLY_END" Condition="PathEnd"/>
		</FLY>
		<FLY_END Animation="IDLE" BlendTick="200">
			<Branch State="IDLE" Condition=""/>
			<FrameEvent Tick="0" Type="Gravity" On="true" Condition=""/>
			<FrameEvent Tick="0" Type="Collision" On="true" Condition=""/>
			<FrameEvent Tick="0" Type="Speed" TargetSpeed="0" Acceleration="200" MoveType="CharacterDirection" Condition=""/>
			<FrameEvent Tick="0" Type="Rotate" Speed="1" Offset="0" RotateType="Fixed" Condition=""/>
			<FrameEvent Tick="0" Type="SetPath" PathKey="-1" Condition=""/>
		</FLY_END>
		<DIE_READY Animation="DIE" BlendTick="100">
			<Branch State="DIE" Condition="End"/>
		</DIE_READY>
		<DIE Animation="DIE" BlendTick="3000">
			<FrameEvent Tick="0" Type="Die" Condition=""/>
			<!-- <FrameEvent Tick="0" Type="SpawnCharacter" CharacterKey="1" Position="0 0 200" Size="1" Condition=""/> -->
		</DIE>
	</ActionStates>
	<CollisionHandlers>
		<Handler Case="Lower" SelfCondition="" TargetCondition="CharacterType_Player">
			<!-- <CollisionEvent Type="RotateToTarget" Speed="10"/> -->
			<!-- <CollisionEvent Type="CallFunction" Name="PointUp"/> -->
			<CollisionEvent Type="SetAction" State="DIE_READY"/>
		</Handler>
		<Handler Case="All" SelfCondition="!HasPath" TargetCondition="CheckAction_TRIGGER_PATH">
			<CollisionEvent Type="SetVariableFromTarget" Name="PathKey"/>
			<CollisionEvent Type="SetAction" State="FLY_READY"/>
		</Handler>
	</CollisionHandlers>
</ActionChart>